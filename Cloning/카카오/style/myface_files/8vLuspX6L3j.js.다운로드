if (self.CavalryLogger) { CavalryLogger.start_js(["usebw"]); }

__d("classWithMixins",[],(function(a,b,c,d,e,f){function a(a,b){var c=function(){a.apply(this,arguments)};c.prototype=Object.assign(Object.create(a.prototype),b.prototype);return c}e.exports=a}),null);
__d("ChatInputBasic.react",["cx","fbt","FocusListener","FlipDirectionOnKeypress","MercuryIDs","MercuryThreadIDMap","MessengerUploadFilesUtil.bs","React","ReactDOM","TextAreaControl","TypingDetectorController","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();b("FocusListener");b("FlipDirectionOnKeypress");var i=b("MercuryThreadIDMap").get();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatInputBasic",_oldHeight:void 0,_textAreaControl:void 0,_typingDetector:void 0,propTypes:{fileUploader:a.object,inputKeyDown:a.func.isRequired,onFocus:a.func,placeholder:a.string,thread:a.object,threadID:a.string.isRequired,uploadPhotoFn:a.func},getInitialState:function(){return{value:""}},componentDidMount:function(){var a=this;this._oldHeight=b("ReactDOM").findDOMNode(this).getBoundingClientRect().height;this._textAreaControl=b("TextAreaControl").getInstance(this.refs.input);var c=this.props,d=c.thread,e=c.threadID,f=b("ReactDOM").findDOMNode(this.refs.input);f&&i.getServerIDFromClientID(e,function(c){a._typingDetector=new(b("TypingDetectorController"))(d,b("MercuryIDs").getUserIDFromThreadID(e),f,"mercury-chat",null,c,a.getValue)})},componentDidUpdate:function(){var a=this;b("setImmediate")(function(){var c=b("ReactDOM").findDOMNode(a).getBoundingClientRect().height;a._oldHeight=c})},componentWillUnmount:function(){this._typingDetector&&this._typingDetector.destroy()},onChange:function(a){this._textAreaControl&&this._textAreaControl.onupdate(),this.setState({value:a.target.value||""})},focus:function(){this.refs.input.focus()},getValue:function(){return this.state.value},onSend:function(){b("MessengerUploadFilesUtil.bs").sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn),this.resetState()},resetState:function(){this.setState(this.getInitialState())},appendText:function(a){this.setState({value:this.state.value+a})},handleInputKeyDown:function(a){this.props.inputKeyDown&&this.props.inputKeyDown(a,this.state.value)},render:function(){return b("React").createElement("textarea",babelHelpers["extends"]({ref:"input"},this.props,{placeholder:h._("\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud558\uc138\uc694..."),value:this.state.value,onChange:this.onChange,onKeyDown:this.handleInputKeyDown,autogrow:"true",className:"_552m uiTextareaNoResize uiTextareaAutogrow","data-jsid":"input"}))}});e.exports=c}),null);