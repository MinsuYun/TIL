 #  함수의 호출  apply()

```javascript
function func( arg1 , arg2){
    return arg1 + arg2 ;
}
func( 1, 2 );
```

함수를 호출하는 방법은 무엇이 있을까?

일반적으로 위와 같이 func(); 라는 명령어를 통해 함수를 호출하게 된다. 

**위의 예제에서는 func(1,2); --> 1+2 가 되어 '3'이 나오게 된다.**



### !Appply란? 

그러나 우리가 이번에 배울 방법은 바로, ***apply();***를 통해 호출 하는 방법이다.

apply는 함수가 가지고 있는 일종의 메소드이며, 메소드의 특성상 해당 함수에 작용하여 어떤 기능을 구현하게 된다. apply는 함수 값을 호출하는 기능을 담당하며 인자로는 2 가지가 들어오게 된다. 

**apply( a, b) ;**

a(첫번째 인자) - 첫번째 인자인 a에는 해당 함수가 실행될 맥락이 들어온다. 

b(두번째 인자) - 두번째 인자인 b에는 배열이 들어온다. 이 배열은 앞선 시간에 배운 arguments가 들어오게 되며, 즉 이 특수배열 안에 담긴 원소 하나하나 가 함수의 인자로 순차적으로 들어오게 된다.



위의 예제에서 함수를 호출하는 방법은 답부터 얘기하면 아래와 같다.



<center>func . apply ( null , [1,2] ) ;



그렇다면 func( 1 , 2 ); 라고 짧고 편하게 해도 되는데, 왜 구지 func.apply(null,[1,2])라는 방식을 통해 함수 값을 호출하는 것일까?



예제를 보기 전, 객체지향 프로그래밍에서 배운 <u>***this***</u> 에 대해 한번 더 정리 한 후, 내용을 이어나가자.



### this

this 란 객체지향 프로그래밍에서 가장 핵심이 되는 ''변수''이다. <u>***'변수'***</u>  라는 말 답게, 값이 정해 진 것이 아니라, 객체와 함수의 맥락에 따라서 유동적으로 this가 지칭하는 값이 변경 된다. 

예제를 통해 살펴 보자.

```javascript
var grades = { 
	'list' : { '민수' : 98 , '양혁' : 89 , '종욱' : 87 , '다영' : 83 } ,
	'show' : function(){ 
        for( var name in this.list ){
            doucument.write( name, this.list[name] );
        } 
	}
}

grades['show']();
```

 this는 함수가 속해있는 객체를 지칭하게 된다. 위 예제에서는 function()이 속해있는 객체인 'grades'

를 가리키게 되는 것이다.

아래 함수호출(grades['show'()])를 하게 되면, show의 밸류인 function()이 실행 되면서 

<center>민수 98

<center>양혁 89

<center>종욱 87

<center>다영 83

이 창에 뜰 것이다.

여기서 this는 자신을 품고 있는 함수인 function()을 품고 있는 객체, 즉 grades를 나타낸다.

위의 예제에서는 this.list = grades.list 라고 봐도 무방하다.

-----------



그럼 다시 돌아와 Apply를 쓰는 구체적인 경우를 살펴보자.



```
o1 = {val1:1, val2:2, val3:3}
o2 = {v1:10, v2:50, v3:100, v4:25}
function sum(){
    var _sum = 0;
    for(name in this){
        _sum += this[name];
    }
    return _sum;
}
alert(sum.apply(o1)) // 6
alert(sum.apply(o2)) // 185
```



위의 예제에서 보면 sum.apply(o1)을 실행하면 **'o1이라는 객체'를 바탕으로 함수가 실행**되게 된다

같은 논리로 sum.apply(o2)를 실행하면 **'o2'라는 객체**를 바탕으로 함수가 실행 된다.



이것이 가능 한 이유는 function sum() { }안에 this가 apply()의 괄호안에 어떤 값이 들어오느냐에 따라 o1을 지칭할지, o2를 지칭할지 맥락에 따라 바뀌기 때문이다.



위의 this 설명에서, **<u>this는 해당함수가 소속되어있는 객체를 나타내는 변수라고 설명하였다.</u>**  위 예제에서 해당함수인 function sum()은 어느 객체에 소속 되어 있지 않다. 그래서 this는 아무 의미가 없다고 볼수 있다. 



하지만 sum.apply(o1)이라는 방식으로 함수를 호출하는 순간, this는 자신이 대변하는 객체가 o1이라고 인식을 하며 function sum()을 객체 o1의 property로 넣어버린다.

즉,  functioin sum()은 졸지에 객체 o1의 속성으로 들어가게 되버리며, 함수를 실행시키게 된다.



### 복잡하게 구지 왜 apply와  this를 통해 함수를 호출할까?

지금 까지 우리는 문제나 예제를 통해 항상 함수를 호출하는 값이 지정되어 있는 경우만 맞닥드려왔었다.

하지만 실제 코드를 짜거나 프로그래밍을 하게 되면, 함수가 끌어오고자 하는 객체(위에서는 o1,o2)가 그때그때 달라지게 되고 가변적이게 된다.

따라서, this를 설정함으로써, 나중에 값이 변경되더라도 그때 그때 문맥에 맞게 함수를 이용하게 되며, 호출을 할때도 apply를 통해 호출하는 것이다.

  